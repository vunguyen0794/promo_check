<%- include('partials/header', {title: title, currentPage: currentPage, time: time}) %>

<style>
  .admin-form { max-width: 700px; margin: 20px auto; padding: 24px; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  .admin-form .form-group { margin-bottom: 20px; }
  .admin-form .form-group label { display: block; font-weight: 600; margin-bottom: 8px; }
  .admin-form .form-group input { width: 100%; padding: 10px 12px; border: 1px solid #ccc; border-radius: 6px; font-size: 15px; box-sizing: border-box; }
  .admin-form .form-group-inline { display: flex; gap: 20px; }
  .admin-form .form-group-inline .form-group { flex: 1; }
  .admin-form button { padding: 12px 20px; font-size: 16px; font-weight: 600; background-color: #0d6efd; color: white; border: none; border-radius: 6px; cursor: pointer; }
  .admin-form .error-message { background-color: #ffebee; color: #c62828; padding: 12px; border-radius: 6px; margin-bottom: 16px; }
</style>

<form class="admin-form" method="POST" action="<%= action %>">
  <div class="dash-title" style="margin-bottom: 20px;"><%= title %></div>
  
  <% if (error) { %>
    <div class="error-message"><strong>Lỗi:</strong> <%= error %></div>
  <% } %>

  <div class="form-group">
    <label for="full_name">Họ và Tên (Bắt buộc)</label>
    <input type="text" id="full_name" name="full_name" value="<%= ranking.full_name || '' %>" required>
  </div>

  <div class="form-group-inline">
    <div class="form-group">
      <label for="rank_order">Thứ hạng (Bắt buộc)</label>
      <input type="number" id="rank_order" name="rank_order" value="<%= ranking.rank_order || '' %>" required placeholder="Ví dụ: 1">
    </div>
    <div class="form-group">
      <label for="display_period">Chu kỳ (Bắt buộc)</label>
      <input type="text" id="display_period" name="display_period" value="<%= ranking.display_period || '' %>" required placeholder="Ví dụ: W44-2025">
    </div>
  </div>
  
  <div class="form-group-inline">
    <div class="form-group">
      <label for="birth_year">Năm sinh</label>
      <input type="number" id="birth_year" name="birth_year" value="<%= ranking.birth_year || '' %>" placeholder="Ví dụ: 1990">
    </div>

    <% /* --- TRƯỜNG MỚI --- */ %>
  <div class="form-group">
    <label for="sales_percentage">% Doanh số</label>
    <input type="number" id="sales_percentage" name="sales_percentage" value="<%= ranking.sales_percentage || '' %>" placeholder="Ví dụ: 95">
  </div>
  <% /* --- HẾT TRƯỜNG MỚI --- */ %>
    <div class="form-group">
      <label for="store">Cửa hàng</label>
      <input type="text" id="store" name="store" value="<%= ranking.store || '' %>" placeholder="Ví dụ: HCM.01">
    </div>
  </div>
  
  <div class="form-group">
    <label for="department">Bộ phận</label>
    <input type="text" id="department" name="department" value="<%= ranking.department || '' %>" placeholder="Ví dụ: Kinh doanh">
  </div>

  <div class="form-group">
    <label for="avatar_image_url">Link Ảnh đại diện (URL)</label>
    <input type="url" id="avatar_image_url" name="avatar_image_url" value="<%= ranking.avatar_image_url || '' %>" placeholder="https://...">
  </div>

  <button type="submit">Lưu lại</button>
  <a href="/admin/ranking" style="margin-left: 10px; color: #6c757d;">Huỷ bỏ</a>
</form>

<%- include('partials/footer') %>